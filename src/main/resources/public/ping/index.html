<html>
    <head>

        <script>

            var ws = new WebSocket(remoteAddress())

            ws.onmessage = function(event)
            {
                var li = document.createElement('li')
                li.innerHTML = new String(new Date().getTime() - parseInt(event.data))
                document.querySelector('#pings').appendChild(li)
            }

            ws.onopen = function()
            {
                setInterval(function()
                {
                    ws.send(new Date().getTime())
                }, 1000)
            }

            function remoteAddress()
            {
                if (window.location.hostname == "localhost")
                {
                    return "ws://" + window.location.hostname + ":5000/ws/ping"
                }
                else
                {
                    return "wss://" + window.location.hostname + "/ws/ping"
                }
            }

        </script>

    </head>
    
    <body>
        <ul id='pings'></ul>
    </body>

</html>